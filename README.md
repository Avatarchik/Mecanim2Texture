# Mecanim2Texture
Bake skinned mesh animations to 2D textures!

## Usage
### Texture Creator
- Drag and drop the script into your project's Editor folder
- In the top bar, select Window/ifelse/Mecanim2Texture
- Drag and drop a gameobject or prefab into the `Animation Rig` field
- The following components are required for the script to work properly.  If they are not preset, errors will appear at the bottom of the window and you will not be able to continue
    - Skinned Mesh Renderer
    - Animator (with an Animator Controller with at least one clip)
- Set the `Color Mode`
    - `LDR` exports as a `.png` and clamps colors in a 0 - 1 range, as well as rounds colors to the nearest 1/255th
    - `HDR` (highly recommended) exports as a `.exr` and does not clamp or round colors* (*it's possible that it does, but the range is extended far beyond LDR)
- Set the `FPS Capture` based on how you exported the animation from your tool of choice.  30 or 60 is recommended for animation export
- Select the `Clip to Bake`
- Set the `Bake Scale` to how large you want your baked animation to be, compared to the original size
- Set `Min Capture Frame` and `Max Capture Frame` to determine the range of frames to be baked into the texture
- Review details
    - Frames to bake: How many frames will be baked, based on `FPS Capture`, `Min Capture Frame`, `Max Capture Frame`, and the duration of `Clip to Bake`
    - Pixels to fill: How many pixels in the final texture will be filled, based on `Frames to bake` and the mesh's vertex count
    - Result texture size: The minimum power of 2 size that can fit all of the `Pixels to fill`.
- Click "Bake Animation".  Depending on how long the animation clip is, it could take up to a few minutes.  With about 700 vertices and a clip under 1 second it takes my computer about 1-2 seconds to generate the file
- Do not close the editor window until the texture creation is complete.  Unity has to run the animation through a coroutine to sample each frame of the animation to get all of the vertices.  If you close the window, you stop the coroutine.

### UV Mapper
- Select the `Mesh` to copy with the new UVs
- Select which `UV Layer` you want to set.  If you've already got UVs on that layer, a warning will appear
- Click on the button to clone the mesh and apply the UVs on the selected layer

## Notes
- The pixels on resulting animation textures are ordered Y bottom to top, and X left to right
- A custom Shader Graph node is supplied in this repository for your convenience.  It's meant for use with the mesh generated by the UV Mapper
- Credits are appreciated, but not necessary

## Dependencies
Available in the Unity Package Manager
- Editor Coroutines
